var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{d as s,X as a,h as i,j as n,Y as l,k as d,r as o,S as r,n as u,z as c,q as g,v as _,O as m,E as v,Z as p,A as f,x as h,c as b,M as k,T as x,L as y,G as w,U as j}from"./index-D0wN_fuZ.js";import{_ as q}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{R as S,C as U}from"./RestBase-6hwWqa7t.js";import{r as V,m as R,R as E}from"./index-CFoXpmaN.js";import{d as M}from"./debounceValidator-Cl5zTG4a.js";import{d as C}from"./index-brT4NzTB.js";import{_ as A}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{_ as L}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";const T={create:{settings:{required:V,isUnique:M((function(e,t){const{id:s,settings:a}={...t.state},i=s?"update":"create";return!a||N.validate({settings:a,id:s,_scenario:i,_specific:!0})}),void 0,500)},settings_value:{required:V,maxLength:R(65535)}},update:{settings:{required:V,isUnique:M((function(e,t){const{id:s,settings:a}={...t.state},i=s?"update":"create";return!a||N.validate({settings:a,id:s,_scenario:i,_specific:!0})}),void 0,500)},settings_value:{required:V,maxLength:R(65535)}}},F=await S("settings","settings/settings"),I=class extends F{constructor(e=null){super(),t(this,"id"),t(this,"settings"),t(this,"settings_value"),t(this,"created_at"),t(this,"updated_at"),null!=e&&(this.id=e.id||void 0,this.settings=e.settings||null,this.settings_value=e.settings_value||null,this.created_at=e.created_at?C(e.created_at):null,this.updated_at=e.updated_at?C(e.updated_at):null)}set_attributes(e=null){null!=e&&(this.id=e.id,this.settings=e.settings,this.settings_value=e.settings_value,this.created_at=C(e.created_at),this.updated_at=C(e.updated_at))}get_id(){return this.id}class_name(){return"Settings"}};t(I,"validations",T),t(I,"feedbacks",{create:{id:{isUnique:"This id has been taken"},settings:{isUnique:"This settings has been taken"}},update:{id:{isUnique:"This id has been taken"},settings:{isUnique:"This settings has been taken"}}}),t(I,"columns",[{title:"Settings",dataIndex:"settings",align:"center",key:"settings",sorter:(e,t)=>+(e.settings>t.settings)-+(e.settings<t.settings)},{title:"Settings_value",dataIndex:"settings_value",align:"center",key:"settings_value",sorter:(e,t)=>+(e.settings_value>t.settings_value)-+(e.settings_value<t.settings_value)},{title:"Acciones",key:"_action",fixed:"right",scopedSlots:{customRender:"_action"}}]),t(I,"visible_columns",I.show_columns(["*"],!0));let N=I;const O={class:"r-container-form"},z={class:"mt-10 sm:mt-0"},B={class:"shadow overflow-hidden sm:rounded-md"},G={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},K={class:"grid grid-cols-4 gap-4"},P={class:"grid-input"},X={class:"col-span-4"},Y={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},Z={class:"r-footer-form"},$={class:"flex"},D={key:0,class:"flex-none items-center"},H=[h("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[y("Insertar y nuevo "),h("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],J={class:"r-footer-button-form"},Q=s({__name:"SettingsForm",props:a({modal:i.bool.def(!1),action:i.string.def("create"),loading_text:i.string.def(""),showLoading:i.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:a(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:t}){const s=n(),a=e,i=t,S="create"==a.action?"Crear":"Actualizar",V=l(e,"modelValue"),R=d(new N(V.value)),M=o(),C=o(!1),{loading:T,toggleEnabled:F,onResult:I,enabled:Q,onError:W}=N.useStaticSave(R,{defaultEnabled:!1}),ee=o(!1),te=()=>{a.modal?i("closeModal"):s.push({name:"settings_list"})};async function se(){var e;await(null==(e=M.value)?void 0:e.validate())&&F()}return W((e=>{r("error","Error en accion","Error en accion del elemento")})),I((e=>{var t;r("success","Accion  "+S,"Accion ejecutada correctamente"),C.value?(null==(t=M.value)||t.clear(),Q.value=!1,Object.assign(R,new N(V.value)),a.modal&&i("reload")):a.modal?i("closeModal",!0):s.push({name:"settings_list"})})),(t,s)=>{const i=U;return u(),c(j,null,[e.showLoading?(u(),g(p,{key:0,"h-full":!0,class:"",loading:v(ee),description:a.loading_text},{default:_((()=>[m(t.$slots,"loading_icon")])),_:3},8,["loading","description"])):f("",!0),h("div",O,[h("div",z,[h("div",B,[b(q,{ref_key:"settingsForm",ref:M,state:v(R),validations:v(N).validations[e.action],feedbacks:v(N).feedbacks[e.action],loading:!0},{default:_((()=>[h("div",G,[h("div",K,[h("div",P,[b(v(E),{type:"text",requiredMark:!0,modelValue:v(R).settings,"onUpdate:modelValue":s[0]||(s[0]=e=>v(R).settings=e),path:"settings",label:"Settings",onKeyup:k(se,["enter"])},null,8,["modelValue"])]),h("div",X,[b(L,{requiredMark:!0,modelValue:v(R).settings_value,"onUpdate:modelValue":s[1]||(s[1]=e=>v(R).settings_value=e),path:"settings_value",label:"Settings_value"},null,8,["modelValue"])])])]),h("div",Y,[h("div",Z,[h("div",$,["create"===e.action?(u(),c("div",D,[b(i,{checked:v(C),"onUpdate:checked":s[2]||(s[2]=e=>x(C)?C.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):f("",!0),"create"===e.action?(u(),c("div",{key:1,onClick:s[3]||(s[3]=e=>v(C).value!=v(C).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},H)):f("",!0)]),h("div",J,[b(A,{class:"ml-5",shadow:"",color:"primary",loading:v(T),onClick:se},{default:_((()=>[y(w(v(S))+" Settings ",1)])),_:1},8,["loading"]),b(A,{class:"ml-5",shadow:"",color:"primary",onClick:te},{default:_((()=>[y(" Cancelar ")])),_:1})])])])])),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{N as S,Q as _};
