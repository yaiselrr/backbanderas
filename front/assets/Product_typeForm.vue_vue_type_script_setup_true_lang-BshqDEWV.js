var e=Object.defineProperty,a=(a,t,i)=>((a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i)(a,"symbol"!=typeof t?t+"":t,i);import{d as t,X as i,h as s,j as n,Y as o,k as r,r as d,S as l,n as c,z as u,q as m,v as p,O as _,E as v,Z as f,A as h,x as g,c as y,M as b,T as k,L as x,G as w,U as q}from"./index-D0wN_fuZ.js";import{_ as j}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{R as U,C as V}from"./RestBase-6hwWqa7t.js";import{r as R,m as E,R as M}from"./index-CFoXpmaN.js";import{d as C}from"./debounceValidator-Cl5zTG4a.js";import{_ as A}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{_ as L}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";const N={create:{name:{required:R,isUnique:C((function(e,a){const{id:t,name:i}={...a.state},s=t?"update":"create";return!i||T.validate({name:i,id:t,_scenario:s,_specific:!0})}),void 0,500)},description:{required:R,maxLength:E(65535)}},update:{name:{required:R,isUnique:C((function(e,a){const{id:t,name:i}={...a.state},s=t?"update":"create";return!i||T.validate({name:i,id:t,_scenario:s,_specific:!0})}),void 0,500)},description:{required:R,maxLength:E(65535)}}},P=await U("product_type","masters/product_type"),S=class extends P{constructor(e=null){super(),a(this,"id"),a(this,"name"),a(this,"description"),null!=e&&(this.id=e.id||void 0,this.name=e.name||null,this.description=e.description||null)}set_attributes(e=null){null!=e&&(this.id=e.id,this.name=e.name,this.description=e.description)}get_id(){return this.id}class_name(){return"Product_type"}};a(S,"validations",N),a(S,"feedbacks",{create:{id:{isUnique:"This id has been taken"},name:{isUnique:"This name has been taken"}},update:{id:{isUnique:"This id has been taken"},name:{isUnique:"This name has been taken"}}}),a(S,"columns",[{title:"Nombre",dataIndex:"name",align:"center",key:"name",sorter:(e,a)=>+(e.name>a.name)-+(e.name<a.name)},{title:"Descripcion",dataIndex:"description",align:"center",key:"description",sorter:(e,a)=>+(e.description>a.description)-+(e.description<a.description)},{title:"Acciones",key:"_action",fixed:"right",width:"5%",scopedSlots:{customRender:"_action"}}]),a(S,"visible_columns",S.show_columns(["name","_action"],!0));let T=S;const F={class:"r-container-form"},I={class:"mt-10 sm:mt-0"},O={class:"shadow overflow-hidden sm:rounded-md"},z={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},B={class:"grid grid-cols-4 gap-4"},D={class:"grid-input"},G={class:"col-span-4"},K={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},X={class:"r-footer-form"},Y={class:"flex"},Z={key:0,class:"flex-none items-center"},$=[g("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[x("Insertar y nuevo "),g("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],H={class:"r-footer-button-form"},J=t({__name:"Product_typeForm",props:i({modal:s.bool.def(!1),action:s.string.def("create"),loading_text:s.string.def(""),showLoading:s.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:i(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const t=n(),i=e,s=a,U="create"==i.action?"Crear":"Actualizar",R=o(e,"modelValue"),E=r(new T(R.value)),C=d(),N=d(!1),{loading:P,toggleEnabled:S,onResult:J,enabled:Q,onError:W}=T.useStaticSave(E,{defaultEnabled:!1}),ee=d(!1),ae=()=>{i.modal?s("closeModal"):t.push({name:"product_type_list"})};async function te(){var e;await(null==(e=C.value)?void 0:e.validate())&&S()}return W((e=>{l("error","Error en accion","Error en accion del elemento")})),J((e=>{var a;l("success","Accion  "+U,"Accion ejecutada correctamente"),N.value?(null==(a=C.value)||a.clear(),Q.value=!1,Object.assign(E,new T(R.value)),i.modal&&s("reload")):i.modal?s("closeModal",!0):t.push({name:"product_type_list"})})),(a,t)=>{const s=V;return c(),u(q,null,[e.showLoading?(c(),m(f,{key:0,"h-full":!0,class:"",loading:v(ee),description:i.loading_text},{default:p((()=>[_(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):h("",!0),g("div",F,[g("div",I,[g("div",O,[y(j,{ref_key:"product_typeForm",ref:C,state:v(E),validations:v(T).validations[e.action],feedbacks:v(T).feedbacks[e.action],loading:!0},{default:p((()=>[g("div",z,[g("div",B,[g("div",D,[y(v(M),{type:"text",requiredMark:!0,modelValue:v(E).name,"onUpdate:modelValue":t[0]||(t[0]=e=>v(E).name=e),path:"name",label:"Name",onKeyup:b(te,["enter"])},null,8,["modelValue"])]),g("div",G,[y(L,{requiredMark:!0,modelValue:v(E).description,"onUpdate:modelValue":t[1]||(t[1]=e=>v(E).description=e),path:"description",label:"Description"},null,8,["modelValue"])])])]),g("div",K,[g("div",X,[g("div",Y,["create"===e.action?(c(),u("div",Z,[y(s,{checked:v(N),"onUpdate:checked":t[2]||(t[2]=e=>k(N)?N.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):h("",!0),"create"===e.action?(c(),u("div",{key:1,onClick:t[3]||(t[3]=e=>v(N).value!=v(N).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},$)):h("",!0)]),g("div",H,[y(A,{class:"ml-5",shadow:"",color:"primary",loading:v(P),onClick:te},{default:p((()=>[x(w(v(U))+" Product_type ",1)])),_:1},8,["loading"]),y(A,{class:"ml-5",shadow:"",color:"primary",onClick:ae},{default:p((()=>[x(" Cancelar ")])),_:1})])])])])),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{T as P,J as _};
