import{R as e,_ as l}from"./RefurbishedForm.vue_vue_type_script_setup_true_lang-DxoGfHM-.js";import{_ as s,a as t,b as o,c as a}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-CMNdRJV8.js";import{d as i,r as n,a as r,Q as d,k as u,S as c,n as m,z as p,c as f,v,x as _,y as x,E as h,G as j,T as g,L as b,R as y,U as w,V as C,W as R,H as E}from"./index-D0wN_fuZ.js";import{M as k}from"./index-BZUQu6cJ.js";import{_ as M,B as A}from"./index-DK-IiT8x.js";import{I as S}from"./index-_uS1yxUQ.js";import{_ as B,M as D}from"./index-BQa5vSjM.js";import{_ as V,a as L}from"./dropdown-DdxiuV_U.js";import"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import"./index-BtQlog3F.js";import"./RestBase-6hwWqa7t.js";import"./createContext-Cl9SgfpP.js";import"./FormItemContext-CfbnWjAK.js";import"./index-CFoXpmaN.js";import"./debounceValidator-Cl5zTG4a.js";import"./index-brT4NzTB.js";import"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import"./ClearButton-D4yBJSZU.js";import"./useValidation-Dimmn3XB.js";import"./index-D-OtIBMI.js";import"./usePopupContainer-BObfUw_y.js";import"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import"./product_order.model-CkNpk3IZ.js";import"./colors-Bmc914HC.js";import"./supportsPassive-pertglWR.js";import"./index-C2qDfXmS.js";import"./useMergedState-BcJwUeRJ.js";import"./KeyCode-BFt-2P2l.js";import"./styleChecker-CGBUfLOL.js";import"./index-BstQ-YzR.js";import"./index-DtiMcqIf.js";import"./debounce-Cg7NfA5c.js";import"./collapseMotion-BM3-mHdV.js";import"./LeftOutlined-BPCL5cU7.js";import"./isMobile-VPrdNIIw.js";import"./useMemo-CnyBa7eu.js";import"./DownOutlined-DYgTl6g-.js";import"./index-ChnaMK_j.js";import"./EyeOutlined-DOQragHS.js";import"./shallowequal-UQLE3OsX.js";const O=_("div",{class:"r-close-icon hoverable-close"},null,-1),F={class:"flex"},I=_("div",{class:"r-loading-default"},null,-1),q={class:"r-breadcumbs"},z=_("div",{class:"flex justify-center items-center"},[_("div",{class:"i-heroicons:home w-1em h-1em mr-1"}),_("p",null,"Inicio")],-1),K=_("div",null,[_("h1",{class:"mt-5"},"Refurbished")],-1),P={class:"r-container-list"},U={class:"relative card w-full float-right"},G={class:""},T={class:"components-input-demo-presuffix mt-3 flex"},W=_("span",{class:"i-heroicons:trash-16-solid text-md mr-1 mb-1"},null,-1),X=_("span",{class:"i-heroicons:plus-16-solid text-lg mr-1 mb-1"},null,-1),H={class:"w-50% mr-20"},N={class:"float-right align-middle"},Q={class:"justify-start w-20%"},Y=_("div",{class:"i-mdi:search w-1em h-1em text-2xl"},null,-1),Z={class:"flex justify-end w-20%"},$=_("div",{class:"flex"},[_("div",{class:"i-mdi:export-variant w-1em h-1em text-xl mr-1"}),b(" Exportar ")],-1),J=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-csv-outline w-1em h-1em text-gray-900 mr-2 text-xl"}),b(" CSV ")],-1),ee=_("span",{class:"flex"},[_("div",{class:"i-mdi:microsoft-excel w-1em h-1em text-green-700 mr-2 text-xl"}),b(" EXCEL ")],-1),le=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-pdf-box w-1em h-1em text-red-500 mr-2 text-xl"}),b(" PDF ")],-1),se={class:"flex justify-center align-center"},te={class:"text-xl flex justify-center align-center"},oe=["onClick"],ae=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer mt-1"},null,-1),ie=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer"},null,-1),ne=i({__name:"RefurbishedList",setup(i){const ne=n(),re=n([]),de=n(null),ue=n(null),ce=e.visible_columns,me=r((()=>re.value.filter((e=>d(e,ne.value,ce))))),{loading:pe,result:fe,onError:ve,onResult:_e,refetch:xe}=e.useGetMany({relations:"all"}),he=u([]),{onError:je,onResult:ge,toggleEnabled:be,loading:ye,enabled:we}=e.useDeleteById(he,{defaultEnabled:!1});_e((e=>{re.value=e.data.data})),ve((e=>{c("error","Error de peticion","Error de peticion del elemento")}));const Ce=n(!1),Re=(e=!1)=>{Ce.value=!Ce.value,e&&(k.destroyAll(),xe())},Ee=()=>{ue.value=null,Re()},ke=(e=!1)=>{ue.value=null,Re(e)};ge((()=>{var e;xe(),null==(e=null==de?void 0:de.value)||e.clearSelection(),c("success","Acción Exitosa","Se han eliminado los elementos correctamente"),we.value=!1,k.destroyAll()}));const Me=()=>{k.confirm({title:f(o,{text:"¿Desea eliminar el/los elementos seleccionados?",iconClass:"i-heroicons:trash w-1em h-1em text-4xl color-red-500",textClass:"ml-5 text-xl",loading:ye,onOk:()=>{var e;Object.assign(he,null==(e=null==de?void 0:de.value)?void 0:e.selectedRowKeys),be()}}),icon:null,footer:null})},Ae=()=>{C("RefurbishedList",ce,me.value)},Se=()=>{R("RefurbishedList",ce,me.value)};return(o,i)=>{var n,r;const d=k,u=E("router-link"),C=M,R=A,re=S,fe=B,ve=D,_e=V,he=L,je=a;return m(),p(w,null,[f(d,{open:h(Ce),"onUpdate:open":i[1]||(i[1]=e=>g(Ce)?Ce.value=e:null),footer:null,"destroy-on-close":!0,onCancel:i[2]||(i[2]=e=>ue.value=null),"wrap-class-name":"modal-form",width:"55%"},{closeIcon:v((()=>[O])),title:v((()=>[_("div",F,[_("div",{class:x([h(ue)?"i-heroicons:pencil-square":"i-heroicons:plus-20-solid","w-1em h-1em p-3.5 mr-2"])},null,2),_("h1",null,j(h(ue)?"Actualizar Refurbished":"Crear Refurbished"),1)])])),default:v((()=>[f(l,{modal:!0,modelValue:h(ue),"onUpdate:modelValue":i[0]||(i[0]=e=>g(ue)?ue.value=e:null),action:h(ue)?"update":"create",onCloseModal:ke,onReload:h(xe),"show-loading":!0},{loading_icon:v((()=>[I])),_:1},8,["modelValue","action","onReload"])])),_:1},8,["open"]),_("div",q,[f(R,{class:"h-full"},{default:v((()=>[f(C,null,{default:v((()=>[f(u,{to:{name:"index"}},{default:v((()=>[z])),_:1})])),_:1}),f(C,null,{default:v((()=>[b("Manage")])),_:1}),f(C,null,{default:v((()=>[b("Refurbished")])),_:1})])),_:1}),K]),_("div",P,[_("div",U,[_("div",G,[_("div",T,[f(h(y),{shadow:"",ref:"btnDelete",class:"btn-delete",disabled:0===(null==(n=h(de))?void 0:n.selectedRowKeys.length),onClick:Me},{default:v((()=>[W,b(" Eliminar ")])),_:1},8,["disabled"]),f(h(y),{class:"mr-3",shadow:"",onClick:Ee},{default:v((()=>[X,b(" Crear Refurbished ")])),_:1}),_("div",H,[_("span",N,"Elementos seleccionados "+j(null==(r=h(de))?void 0:r.selectedRowKeys.length)+"/"+j(h(me).length),1)]),_("div",Q,[f(re,{value:h(ne),"onUpdate:value":i[3]||(i[3]=e=>g(ne)?ne.value=e:null),class:"col-1",placeholder:"Buscar elemento","allow-clear":!0},{prefix:v((()=>[Y])),_:1},8,["value"])]),_("div",Z,[f(_e,{class:"flex"},{overlay:v((()=>[f(ve,null,{default:v((()=>[f(fe,{key:"1",onClick:Ae},{default:v((()=>[J])),_:1}),f(fe,{key:"2",onClick:Se},{default:v((()=>[ee])),_:1}),f(fe,{key:"3"},{default:v((()=>[le])),_:1})])),_:1})])),default:v((()=>[$])),_:1})])])]),f(t,{ref_key:"refurbishedTbl",ref:de,columns:h(ce),data:h(me),loading_icon:h(pe),has_selection:!0,on_select:e=>{},onChangePagination:i[4]||(i[4]=e=>{h(xe)()}),id_element:"id",class:"mt-5"},{loading_icon:v((()=>[f(s)])),_action:v((({_:l,record:s})=>[_("div",se,[_("div",te,[f(he,null,{title:v((()=>[b("Actualizar elemento")])),default:v((()=>[_("div",{class:"i-heroicons:pencil-square w-1em h-1em text-blue-600 cursor-pointer",onClick:e=>(e=>{ue.value=e,Re()})(s)},null,8,oe)])),_:2},1024),f(je,{title:"Desea eliminar este elemento?","ok-text":"Si","cancel-text":"No",onConfirm:l=>(l=>{pe.value=!0;const{onResult:s,onError:t}=e.useDelete(l.id);s((()=>{c("success","Acción Exitosa","Se ha eliminado el elmento correctamente"),pe.value=!1,xe()})),t((()=>{c("error","Acción Fallida","Ocurrio un error en la eliminación del elemento, puede estar asociado a otros elementos"),pe.value=!1}))})(s)},{icon:v((()=>[ae])),default:v((()=>[f(he,null,{title:v((()=>[b("Eliminar elemento")])),default:v((()=>[ie])),_:1})])),_:2},1032,["onConfirm"])])])])),_:1},8,["columns","data","loading_icon"])])])],64)}}});export{ne as default};
