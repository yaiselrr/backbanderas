import{P as e}from"./products.model-Dn3jzT27.js";import{_ as l,a as s,b as t,c as o}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-CMNdRJV8.js";import{d as a,r as i,a as r,Q as n,j as d,k as c,S as u,n as m,z as p,c as v,v as _,x,y as f,E as j,G as h,T as g,L as y,R as b,U as w,V as C,W as E}from"./index-D0wN_fuZ.js";import{_ as P}from"./ProductsForm.vue_vue_type_script_setup_true_lang-CtgGOrFB.js";import{B as R}from"./breadcrump-BYoyPtf_.js";import{M as k}from"./index-BZUQu6cJ.js";import{I as A}from"./index-_uS1yxUQ.js";import{_ as M,M as S}from"./index-BQa5vSjM.js";import{_ as O,a as B}from"./dropdown-DdxiuV_U.js";import"./RestBase-6hwWqa7t.js";import"./createContext-Cl9SgfpP.js";import"./FormItemContext-CfbnWjAK.js";import"./index-CFoXpmaN.js";import"./index-brT4NzTB.js";import"./debounceValidator-Cl5zTG4a.js";import"./colors-Bmc914HC.js";import"./supportsPassive-pertglWR.js";import"./index-C2qDfXmS.js";import"./useMergedState-BcJwUeRJ.js";import"./KeyCode-BFt-2P2l.js";import"./styleChecker-CGBUfLOL.js";import"./index-BstQ-YzR.js";import"./index-DtiMcqIf.js";import"./debounce-Cg7NfA5c.js";import"./collapseMotion-BM3-mHdV.js";import"./LeftOutlined-BPCL5cU7.js";import"./isMobile-VPrdNIIw.js";import"./useMemo-CnyBa7eu.js";import"./DownOutlined-DYgTl6g-.js";import"./index-ChnaMK_j.js";import"./index-D-OtIBMI.js";import"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import"./index-BtQlog3F.js";import"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import"./ClearButton-D4yBJSZU.js";import"./useValidation-Dimmn3XB.js";import"./usePopupContainer-BObfUw_y.js";import"./categories.model-D6QCCUkg.js";import"./CategoriesForm.vue_vue_type_script_setup_true_lang-D3fV53dV.js";import"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import"./index-DEby8QZG.js";import"./useRefs-CLREAGAq.js";import"./EyeOutlined-DOQragHS.js";import"./index-BjJu6SUw.js";import"./PlusOutlined-ByZyTB3m.js";import"./index-DK-IiT8x.js";import"./shallowequal-UQLE3OsX.js";const D=x("div",{class:"r-close-icon hoverable-close"},null,-1),L={class:"flex"},V=x("div",{class:"r-loading-default"},null,-1),F={class:"r-breadcumbs"},K=x("div",null,[x("h1",{class:"mt-5"},"Products")],-1),U={class:"r-container-list"},q={class:"relative card w-full float-right"},z={class:""},I={class:"components-input-demo-presuffix mt-3 flex"},T=x("span",{class:"i-heroicons:trash-16-solid text-md mr-1 mb-1"},null,-1),G=x("span",{class:"i-heroicons:plus-16-solid text-lg mr-1 mb-1"},null,-1),Q={class:"w-50% mr-20"},X={class:"float-right align-middle"},N={class:"justify-start w-20%"},W=x("div",{class:"i-mdi:search w-1em h-1em text-2xl"},null,-1),Y={class:"flex justify-end w-20%"},Z=x("div",{class:"flex"},[x("div",{class:"i-mdi:export-variant w-1em h-1em text-xl mr-1"}),y(" Exportar ")],-1),$=x("span",{class:"flex"},[x("div",{class:"i-mdi:file-csv-outline w-1em h-1em text-gray-900 mr-2 text-xl"}),y(" CSV ")],-1),H=x("span",{class:"flex"},[x("div",{class:"i-mdi:microsoft-excel w-1em h-1em text-green-700 mr-2 text-xl"}),y(" EXCEL ")],-1),J=x("span",{class:"flex"},[x("div",{class:"i-mdi:file-pdf-box w-1em h-1em text-red-500 mr-2 text-xl"}),y(" PDF ")],-1),ee={class:"flex justify-center align-center"},le={class:"text-xl flex justify-center align-center"},se=["onClick"],te=x("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer mt-1"},null,-1),oe=x("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer"},null,-1),ae=a({__name:"ProductsList",setup(a){const ae=i(),ie=i([]),re=i(null),ne=i(null),de=e.visible_columns,ce=r((()=>ie.value.filter((e=>n(e,ae.value,de))))),ue=d(),{loading:me,result:pe,onError:ve,onResult:_e,refetch:xe}=e.useGetMany(),fe=c([{title:"Administración",disabled:!1,href:"/guarantee"},{title:"Productos",disabled:!0}]),je=c([]),{onError:he,onResult:ge,toggleEnabled:ye,loading:be,enabled:we}=e.useDeleteById(je,{defaultEnabled:!1});_e((e=>{ie.value=e.data.data})),ve((e=>{u("error","Error de peticion","Error de peticion del elemento")}));const Ce=i(!1),Ee=(e=!1)=>{Ce.value=!Ce.value,e&&(k.destroyAll(),xe())},Pe=(e=!1)=>{ne.value=null,Ee(e)};ge((()=>{var e;xe(),null==(e=null==re?void 0:re.value)||e.clearSelection(),u("success","Acción Exitosa","Se han eliminado los elementos correctamente"),we.value=!1,k.destroyAll()}));const Re=()=>{k.confirm({title:v(t,{text:"¿Desea eliminar el/los elementos seleccionados?",iconClass:"i-heroicons:trash w-1em h-1em text-4xl color-red-500",textClass:"ml-5 text-xl",loading:be,onOk:()=>{var e;Object.assign(je,null==(e=null==re?void 0:re.value)?void 0:e.selectedRowKeys),ye()}}),icon:null,footer:null})},ke=()=>{C("ProductsList",de,ce.value)},Ae=()=>{E("ProductsList",de,ce.value)};return(t,a)=>{var i,r;const n=k,d=A,c=M,C=S,E=O,ie=B,pe=o;return m(),p(w,null,[v(n,{open:j(Ce),"onUpdate:open":a[1]||(a[1]=e=>g(Ce)?Ce.value=e:null),footer:null,"destroy-on-close":!0,onCancel:a[2]||(a[2]=e=>ne.value=null),"wrap-class-name":"modal-form",width:"55%"},{closeIcon:_((()=>[D])),title:_((()=>[x("div",L,[x("div",{class:f([j(ne)?"i-heroicons:pencil-square":"i-heroicons:plus-20-solid","w-1em h-1em p-3.5 mr-2"])},null,2),x("h1",null,h(j(ne)?"Actualizar Products":"Crear Producto"),1)])])),default:_((()=>[v(P,{modal:!0,modelValue:j(ne),"onUpdate:modelValue":a[0]||(a[0]=e=>g(ne)?ne.value=e:null),action:j(ne)?"update":"create",onCloseModal:Pe,onReload:j(xe),"show-loading":!0},{loading_icon:_((()=>[V])),_:1},8,["modelValue","action","onReload"])])),_:1},8,["open"]),x("div",F,[v(R,{breadcrumb:j(fe)},null,8,["breadcrumb"]),K]),x("div",U,[x("div",q,[x("div",z,[x("div",I,[v(j(b),{shadow:"",ref:"btnDelete",class:"btn-delete",disabled:0===(null==(i=j(re))?void 0:i.selectedRowKeys.length),onClick:Re},{default:_((()=>[T,y(" Eliminar ")])),_:1},8,["disabled"]),v(j(b),{class:"mr-3",shadow:"",onClick:a[3]||(a[3]=e=>j(ue).push({path:"/manage/products/create"}))},{default:_((()=>[G,y(" Crear Producto ")])),_:1}),x("div",Q,[x("span",X,"Elementos seleccionados "+h(null==(r=j(re))?void 0:r.selectedRowKeys.length)+"/"+h(j(ce).length),1)]),x("div",N,[v(d,{value:j(ae),"onUpdate:value":a[4]||(a[4]=e=>g(ae)?ae.value=e:null),class:"col-1",placeholder:"Buscar elemento","allow-clear":!0},{prefix:_((()=>[W])),_:1},8,["value"])]),x("div",Y,[v(E,{class:"flex"},{overlay:_((()=>[v(C,null,{default:_((()=>[v(c,{key:"1",onClick:ke},{default:_((()=>[$])),_:1}),v(c,{key:"2",onClick:Ae},{default:_((()=>[H])),_:1}),v(c,{key:"3"},{default:_((()=>[J])),_:1})])),_:1})])),default:_((()=>[Z])),_:1})])])]),v(s,{ref_key:"productsTbl",ref:re,columns:j(de),data:j(ce),loading_icon:j(me),has_selection:!0,on_select:e=>{},onChangePagination:a[5]||(a[5]=e=>{j(xe)()}),id_element:"id",class:"mt-5"},{loading_icon:_((()=>[v(l)])),_action:_((({_:l,record:s})=>[x("div",ee,[x("div",le,[v(ie,null,{title:_((()=>[y("Actualizar elemento")])),default:_((()=>[x("div",{class:"i-heroicons:pencil-square w-1em h-1em text-blue-600 cursor-pointer",onClick:e=>(e=>{ne.value=e,Ee()})(s)},null,8,se)])),_:2},1024),v(pe,{title:"Desea eliminar este elemento?","ok-text":"Si","cancel-text":"No",onConfirm:l=>(l=>{me.value=!0;const{onResult:s,onError:t}=e.useDelete(l.id);s((()=>{u("success","Acción Exitosa","Se ha eliminado el elmento correctamente"),me.value=!1,xe()})),t((()=>{u("error","Acción Fallida","Ocurrio un error en la eliminación del elemento, puede estar asociado a otros elementos"),me.value=!1}))})(s)},{icon:_((()=>[te])),default:_((()=>[v(ie,null,{title:_((()=>[y("Eliminar elemento")])),default:_((()=>[oe])),_:1})])),_:2},1032,["onConfirm"])])])])),_:1},8,["columns","data","loading_icon"])])])],64)}}});export{ae as default};
