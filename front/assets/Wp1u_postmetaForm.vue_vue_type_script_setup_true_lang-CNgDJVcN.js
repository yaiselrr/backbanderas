var e=Object.defineProperty,a=(a,t,s)=>((a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s)(a,"symbol"!=typeof t?t+"":t,s);import{d as t,X as s,h as l,j as o,Y as i,k as d,r as n,S as r,n as u,z as m,q as _,v as c,O as p,E as v,Z as y,A as k,x as f,c as g,M as h,T as b,L as x,G as w,U as V}from"./index-D0wN_fuZ.js";import{_ as j}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{R as M,C as R}from"./RestBase-6hwWqa7t.js";import{r as E,i as U,R as q}from"./index-CFoXpmaN.js";import{_ as C}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{_ as A}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";const S={create:{post_id:{required:E,integer:U},meta_key:{},meta_value:{}},update:{post_id:{required:E,integer:U},meta_key:{},meta_value:{}}},I=await M("wp1u_postmeta","wp/wp1u_postmeta"),N=class extends I{constructor(e=null){super(),a(this,"meta_id"),a(this,"post_id"),a(this,"meta_key"),a(this,"meta_value"),null!=e&&(this.meta_id=e.meta_id||void 0,this.post_id=e.post_id||null,this.meta_key=e.meta_key||null,this.meta_value=e.meta_value||null)}set_attributes(e=null){null!=e&&(this.meta_id=e.meta_id,this.post_id=e.post_id,this.meta_key=e.meta_key,this.meta_value=e.meta_value)}get_id(){return this.meta_id}class_name(){return"Wp1u_postmeta"}};a(N,"validations",S),a(N,"feedbacks",{create:{meta_id:{isUnique:"This meta_id has been taken"}},update:{meta_id:{isUnique:"This meta_id has been taken"}}}),a(N,"columns",[{title:"Post_id",dataIndex:"post_id",align:"center",key:"post_id",sorter:(e,a)=>e.post_id-a.post_id},{title:"Meta_key",dataIndex:"meta_key",align:"center",key:"meta_key",sorter:(e,a)=>+(e.meta_key>a.meta_key)-+(e.meta_key<a.meta_key)},{title:"Meta_value",dataIndex:"meta_value",align:"center",key:"meta_value",sorter:(e,a)=>+(e.meta_value>a.meta_value)-+(e.meta_value<a.meta_value)},{title:"Acciones",key:"_action",fixed:"right",width:"5%",scopedSlots:{customRender:"_action"}}]),a(N,"visible_columns",N.show_columns(["*"],!0));let W=N;const F={class:"r-container-form"},L={class:"mt-10 sm:mt-0"},O={class:"shadow overflow-hidden sm:rounded-md"},P={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},T={class:"grid grid-cols-4 gap-4"},z={class:"grid-input"},B={class:"grid-input"},K={class:"col-span-4"},G={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},X={class:"r-footer-form"},Y={class:"flex"},Z={key:0,class:"flex-none items-center"},$=[f("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[x("Insertar y nuevo "),f("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],D={class:"r-footer-button-form"},H=t({__name:"Wp1u_postmetaForm",props:s({modal:l.bool.def(!1),action:l.string.def("create"),loading_text:l.string.def(""),showLoading:l.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:s(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const t=o(),s=e,l=a,M="create"==s.action?"Crear":"Actualizar",E=i(e,"modelValue"),U=d(new W(E.value)),S=n(),I=n(!1),{loading:N,toggleEnabled:H,onResult:J,enabled:Q,onError:ee}=W.useStaticSave(U,{defaultEnabled:!1}),ae=n(!1),te=()=>{s.modal?l("closeModal"):t.push({name:"wp1u_postmeta_list"})};async function se(){var e;await(null==(e=S.value)?void 0:e.validate())&&H()}return ee((e=>{r("error","Error en accion","Error en accion del elemento")})),J((e=>{var a;r("success","Accion  "+M,"Accion ejecutada correctamente"),I.value?(null==(a=S.value)||a.clear(),Q.value=!1,Object.assign(U,new W(E.value)),s.modal&&l("reload")):s.modal?l("closeModal",!0):t.push({name:"wp1u_postmeta_list"})})),(a,t)=>{const l=R;return u(),m(V,null,[e.showLoading?(u(),_(y,{key:0,"h-full":!0,class:"",loading:v(ae),description:s.loading_text},{default:c((()=>[p(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):k("",!0),f("div",F,[f("div",L,[f("div",O,[g(j,{ref_key:"wp1u_postmetaForm",ref:S,state:v(U),validations:v(W).validations[e.action],feedbacks:v(W).feedbacks[e.action],loading:!0},{default:c((()=>[f("div",P,[f("div",T,[f("div",z,[g(v(q),{onlyNumbers:!0,type:"number",requiredMark:!0,modelValue:v(U).post_id,"onUpdate:modelValue":t[0]||(t[0]=e=>v(U).post_id=e),path:"post_id",label:"Post_id",onKeyup:h(se,["enter"])},null,8,["modelValue"])]),f("div",B,[g(v(q),{type:"text",modelValue:v(U).meta_key,"onUpdate:modelValue":t[1]||(t[1]=e=>v(U).meta_key=e),path:"meta_key",label:"Meta_key",onKeyup:h(se,["enter"])},null,8,["modelValue"])]),f("div",K,[g(A,{modelValue:v(U).meta_value,"onUpdate:modelValue":t[2]||(t[2]=e=>v(U).meta_value=e),path:"meta_value",label:"Meta_value"},null,8,["modelValue"])])])]),f("div",G,[f("div",X,[f("div",Y,["create"===e.action?(u(),m("div",Z,[g(l,{checked:v(I),"onUpdate:checked":t[3]||(t[3]=e=>b(I)?I.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):k("",!0),"create"===e.action?(u(),m("div",{key:1,onClick:t[4]||(t[4]=e=>v(I).value!=v(I).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},$)):k("",!0)]),f("div",D,[g(C,{class:"ml-5",shadow:"",color:"primary",loading:v(N),onClick:se},{default:c((()=>[x(w(v(M))+" Wp1u_postmeta ",1)])),_:1},8,["loading"]),g(C,{class:"ml-5",shadow:"",color:"primary",onClick:te},{default:c((()=>[x(" Cancelar ")])),_:1})])])])])),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{W,H as _};
