import{d as e,X as a,h as o,j as l,Y as s,k as r,r as t,a as d,S as i,n,z as c,q as u,v as m,O as p,E as v,Z as _,A as f,x as g,c as y,M as b,T as k,L as x,G as h,U as w,H as j}from"./index-D0wN_fuZ.js";import{_ as V}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{P as M}from"./product_order.model-CkNpk3IZ.js";import{_ as C}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{_ as q}from"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import{O as E}from"./orders.model-DOfVaMlt.js";import{C as R}from"./RestBase-6hwWqa7t.js";const F={class:"r-container-form"},O={class:"mt-10 sm:mt-0"},S={class:"shadow overflow-hidden sm:rounded-md"},A={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},N={class:"grid grid-cols-4 gap-4"},U={class:"grid-input"},z={class:"grid-input"},I={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},L={class:"r-footer-form"},P={class:"flex"},B={key:0,class:"flex-none items-center"},G=[g("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[x("Insertar y nuevo "),g("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],K={class:"r-footer-button-form"},H=e({__name:"Product_orderForm",props:a({modal:o.bool.def(!1),action:o.string.def("create"),loading_text:o.string.def(""),showLoading:o.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:a(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const o=l(),H=e,Q=a,T="create"==H.action?"Crear":"Actualizar",X=s(e,"modelValue"),Y=r(new M(X.value)),Z=t(),$=t(!1),{loading:D,result:J}=E.useGetMany(),{loading:W,toggleEnabled:ee,onResult:ae,enabled:oe,onError:le}=M.useStaticSave(Y,{defaultEnabled:!1}),se=d((()=>D.value)),re=()=>{H.modal?Q("closeModal"):o.push({name:"product_order_list"})};async function te(){var e;await(null==(e=Z.value)?void 0:e.validate())&&ee()}return le((e=>{i("error","Error en accion","Error en accion del elemento")})),ae((e=>{var a;i("success","Accion  "+T,"Accion ejecutada correctamente"),$.value?(null==(a=Z.value)||a.clear(),oe.value=!1,Object.assign(Y,new M(X.value)),H.modal&&Q("reload")):H.modal?Q("closeModal",!0):o.push({name:"format_product_order_list"})})),(a,o)=>{const l=j("RInput"),s=R;return n(),c(w,null,[e.showLoading?(n(),u(_,{key:0,"h-full":!0,class:"",loading:v(se),description:H.loading_text},{default:m((()=>[p(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):f("",!0),g("div",F,[g("div",O,[g("div",S,[y(V,{ref:"format_product_orderForm",state:v(Y),validations:v(M).validations[e.action],feedbacks:v(M).feedbacks[e.action],loading:!0},{default:m((()=>{var a;return[g("div",A,[g("div",N,[g("div",U,[y(l,{onlyNumbers:!0,type:"number",requiredMark:!0,modelValue:v(Y).quantity,"onUpdate:modelValue":o[0]||(o[0]=e=>v(Y).quantity=e),path:"quantity",label:"Quantity",onKeyup:b(te,["enter"])},null,8,["modelValue"])]),g("div",z,[y(q,{modelValue:v(Y).order_id,"onUpdate:modelValue":o[1]||(o[1]=e=>v(Y).order_id=e),"id-key":"id","required-mark":!0,ref:"selectId","loading-data":v(D),loading:v(D),"text-key":"code",allowClear:!0,showFilter:"",items:null==(a=v(J))?void 0:a.data,label:"Orders",onKeyup:b(te,["enter"])},null,8,["modelValue","loading-data","loading","items"])])])]),g("div",I,[g("div",L,[g("div",P,["create"===e.action?(n(),c("div",B,[y(s,{checked:v($),"onUpdate:checked":o[2]||(o[2]=e=>k($)?$.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):f("",!0),"create"===e.action?(n(),c("div",{key:1,onClick:o[3]||(o[3]=e=>v($).value!=v($).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},G)):f("",!0)]),g("div",K,[y(C,{class:"ml-5",shadow:"",color:"primary",loading:v(W),onClick:te},{default:m((()=>[x(h(v(T))+" Ordenes Productos ",1)])),_:1},8,["loading"]),y(C,{class:"ml-5",shadow:"",color:"primary",onClick:re},{default:m((()=>[x(" Cancelar ")])),_:1})])])])]})),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{H as _};
