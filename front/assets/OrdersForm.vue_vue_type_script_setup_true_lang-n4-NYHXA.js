import{d as e,X as a,h as l,j as d,Y as o,k as s,r as t,a as r,S as i,n,z as u,q as c,v as m,O as p,E as _,Z as v,A as y,x as g,c as f,M as b,T as V,L as h,G as k,U as x}from"./index-D0wN_fuZ.js";import{_ as w}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{O as j}from"./orders.model-DOfVaMlt.js";import{_ as q}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{R as C}from"./index-CFoXpmaN.js";import{_ as U}from"./RDatePicker.vue_vue_type_style_index_0_lang-C7kumIjJ.js";import{_ as M}from"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import{_ as R}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import{U as E}from"./users.model-13Myq0P6.js";import{P as F}from"./pay_ways.model-B9mGbyfv.js";import{R as K}from"./request_statuses.model-DtSxHQNi.js";import{C as O}from"./RestBase-6hwWqa7t.js";const A={class:"r-container-form"},I={class:"mt-10 sm:mt-0"},P={class:"shadow overflow-hidden sm:rounded-md"},S={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},G={class:"grid grid-cols-4 gap-4"},N={class:"grid-input"},z={class:"grid-input"},L={class:"grid-input"},B={class:"grid-input"},D={class:"col-span-4"},H={class:"grid-input"},T={class:"grid-input"},X={class:"grid-input"},Y={class:"grid-input"},Z={class:"grid-input"},$={class:"grid-input"},J={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},Q={class:"r-footer-form"},W={class:"flex"},ee={key:0,class:"flex-none items-center"},ae=[g("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[h("Insertar y nuevo "),g("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],le={class:"r-footer-button-form"},de=e({__name:"OrdersForm",props:a({modal:l.bool.def(!1),action:l.string.def("create"),loading_text:l.string.def(""),showLoading:l.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:a(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const l=d(),de=e,oe=a,se="create"==de.action?"Crear":"Actualizar",te=o(e,"modelValue"),re=s(new j(te.value)),ie=t(),ne=t(!1),{loading:ue,result:ce}=E.useGetMany(),{loading:me,result:pe}=F.useGetMany(),{loading:_e,result:ve}=K.useGetMany(),{loading:ye,toggleEnabled:ge,onResult:fe,enabled:be,onError:Ve}=j.useStaticSave(re,{defaultEnabled:!1}),he=r((()=>ue.value||me.value||_e.value)),ke=()=>{de.modal?oe("closeModal"):l.push({name:"orders_list"})};async function xe(){var e;await(null==(e=ie.value)?void 0:e.validate())&&ge()}return Ve((e=>{i("error","Error en accion","Error en accion del elemento")})),fe((e=>{var a;i("success","Accion  "+se,"Accion ejecutada correctamente"),ne.value?(null==(a=ie.value)||a.clear(),be.value=!1,Object.assign(re,new j(te.value)),de.modal&&oe("reload")):de.modal?oe("closeModal",!0):l.push({name:"orders_list"})})),(a,l)=>{const d=O;return n(),u(x,null,[e.showLoading?(n(),c(v,{key:0,"h-full":!0,class:"",loading:_(he),description:de.loading_text},{default:m((()=>[p(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):y("",!0),g("div",A,[g("div",I,[g("div",P,[f(w,{ref_key:"ordersForm",ref:ie,state:_(re),validations:_(j).validations[e.action],feedbacks:_(j).feedbacks[e.action],loading:!0},{default:m((()=>{var a,o,s;return[g("div",S,[g("div",G,[g("div",N,[f(_(C),{type:"text",requiredMark:!0,modelValue:_(re).code,"onUpdate:modelValue":l[0]||(l[0]=e=>_(re).code=e),path:"code",label:"Code",onKeyup:b(xe,["enter"])},null,8,["modelValue"])]),g("div",z,[f(_(C),{type:"text",modelValue:_(re).phone,"onUpdate:modelValue":l[1]||(l[1]=e=>_(re).phone=e),path:"phone",label:"Phone",onKeyup:b(xe,["enter"])},null,8,["modelValue"])]),g("div",L,[f(_(C),{type:"text",modelValue:_(re).address,"onUpdate:modelValue":l[2]||(l[2]=e=>_(re).address=e),path:"address",label:"Address",onKeyup:b(xe,["enter"])},null,8,["modelValue"])]),g("div",B,[f(_(C),{onlyNumbers:!0,type:"number",requiredMark:!0,modelValue:_(re).price,"onUpdate:modelValue":l[3]||(l[3]=e=>_(re).price=e),path:"price",label:"Price",onKeyup:b(xe,["enter"])},null,8,["modelValue"])]),g("div",D,[f(R,{modelValue:_(re).observations,"onUpdate:modelValue":l[4]||(l[4]=e=>_(re).observations=e),path:"observations",label:"Observations"},null,8,["modelValue"])]),g("div",H,[f(M,{modelValue:_(re).request_status_id,"onUpdate:modelValue":l[5]||(l[5]=e=>_(re).request_status_id=e),"id-key":"id","required-mark":!0,ref:"selectId","loading-data":_(_e),loading:_(_e),"text-key":"name",allowClear:!0,showFilter:"",items:null==(a=_(ve))?void 0:a.data,label:"Request_statuses",onKeyup:b(xe,["enter"])},null,8,["modelValue","loading-data","loading","items"])]),g("div",T,[f(M,{modelValue:_(re).pay_way_id,"onUpdate:modelValue":l[6]||(l[6]=e=>_(re).pay_way_id=e),"id-key":"id","required-mark":!0,ref:"selectId","loading-data":_(me),loading:_(me),"text-key":"name",allowClear:!0,showFilter:"",items:null==(o=_(pe))?void 0:o.data,label:"Pay_ways",onKeyup:b(xe,["enter"])},null,8,["modelValue","loading-data","loading","items"])]),g("div",X,[f(U,{modelValue:_(re).delivery_date,"onUpdate:modelValue":l[7]||(l[7]=e=>_(re).delivery_date=e),path:"delivery_date",label:"Delivery_date",allowClear:!0},null,8,["modelValue"])]),g("div",Y,[f(U,{requiredMark:!0,modelValue:_(re).requested_date,"onUpdate:modelValue":l[8]||(l[8]=e=>_(re).requested_date=e),path:"requested_date",label:"Requested_date",allowClear:!0},null,8,["modelValue"])]),g("div",Z,[f(U,{modelValue:_(re).cancelled_at,"onUpdate:modelValue":l[9]||(l[9]=e=>_(re).cancelled_at=e),path:"cancelled_at",label:"Cancelled_at",allowClear:!0},null,8,["modelValue"])]),g("div",$,[f(M,{modelValue:_(re).cancelled_by,"onUpdate:modelValue":l[10]||(l[10]=e=>_(re).cancelled_by=e),"id-key":"id","required-mark":!0,ref:"selectId","loading-data":_(ue),loading:_(ue),"text-key":"name",allowClear:!0,showFilter:"",items:null==(s=_(ce))?void 0:s.data,label:"Users",onKeyup:b(xe,["enter"])},null,8,["modelValue","loading-data","loading","items"])])])]),g("div",J,[g("div",Q,[g("div",W,["create"===e.action?(n(),u("div",ee,[f(d,{checked:_(ne),"onUpdate:checked":l[11]||(l[11]=e=>V(ne)?ne.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):y("",!0),"create"===e.action?(n(),u("div",{key:1,onClick:l[12]||(l[12]=e=>_(ne).value!=_(ne).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},ae)):y("",!0)]),g("div",le,[f(q,{class:"ml-5",shadow:"",color:"primary",loading:_(ye),onClick:xe},{default:m((()=>[h(k(_(se))+" Orders ",1)])),_:1},8,["loading"]),f(q,{class:"ml-5",shadow:"",color:"primary",onClick:ke},{default:m((()=>[h(" Cancelar ")])),_:1})])])])]})),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{de as _};
