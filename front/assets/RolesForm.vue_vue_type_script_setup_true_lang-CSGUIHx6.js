import{d as e,X as a,h as l,j as o,Y as s,k as t,r,a as d,S as i,n,z as c,q as u,v as m,O as p,E as v,Z as _,A as f,x as g,c as y,M as b,T as k,L as x,G as h,U as w}from"./index-D0wN_fuZ.js";import{_ as V}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{R as j}from"./roles.model-CLThzeQD.js";import{_ as R}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{R as M}from"./index-CFoXpmaN.js";import{_ as C}from"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import{_ as E}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import{C as S}from"./RestBase-6hwWqa7t.js";const U={class:"r-container-form"},q={class:"mt-10 sm:mt-0"},A={class:"shadow overflow-hidden sm:rounded-md"},F={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},N={class:"grid grid-cols-4 gap-4"},z={class:"grid-input"},L={class:"grid-input"},B={class:"col-span-4"},G={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},I={class:"r-footer-form"},K={class:"flex"},O={key:0,class:"flex-none items-center"},D=[g("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[x("Insertar y nuevo "),g("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],T={class:"r-footer-button-form"},X=e({__name:"RolesForm",props:a({modal:l.bool.def(!1),action:l.string.def("create"),loading_text:l.string.def(""),showLoading:l.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:a(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const l=o(),X=e,Y=a,Z="create"==X.action?"Crear":"Actualizar",$=s(e,"modelValue"),H=t(new j($.value)),J=r(),P=r(!1),{loading:Q,result:W}=j.useGetMany(),{loading:ee,toggleEnabled:ae,onResult:le,enabled:oe,onError:se}=j.useStaticSave(H,{defaultEnabled:!1}),te=d((()=>Q.value)),re=()=>{X.modal?Y("closeModal"):l.push({name:"roles_list"})};async function de(){var e;await(null==(e=J.value)?void 0:e.validate())&&ae()}return se((e=>{i("error","Error en accion","Error en accion del elemento")})),le((e=>{var a;i("success","Accion  "+Z,"Accion ejecutada correctamente"),P.value?(null==(a=J.value)||a.clear(),oe.value=!1,Object.assign(H,new j($.value)),X.modal&&Y("reload")):X.modal?Y("closeModal",!0):l.push({name:"roles_list"})})),(a,l)=>{const o=S;return n(),c(w,null,[e.showLoading?(n(),u(_,{key:0,"h-full":!0,class:"",loading:v(te),description:X.loading_text},{default:m((()=>[p(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):f("",!0),g("div",U,[g("div",q,[g("div",A,[y(V,{ref_key:"rolesForm",ref:J,state:v(H),validations:v(j).validations[e.action],feedbacks:v(j).feedbacks[e.action],loading:!0},{default:m((()=>{var a;return[g("div",F,[g("div",N,[g("div",z,[y(C,{modelValue:v(H).role_father_id,"onUpdate:modelValue":l[0]||(l[0]=e=>v(H).role_father_id=e),"id-key":"id","required-mark":!0,ref:"selectId","loading-data":v(Q),loading:v(Q),"text-key":"name",allowClear:!0,showFilter:"",items:null==(a=v(W))?void 0:a.data,label:"Roles",onKeyup:b(de,["enter"])},null,8,["modelValue","loading-data","loading","items"])]),g("div",L,[y(v(M),{type:"text",requiredMark:!0,modelValue:v(H).name,"onUpdate:modelValue":l[1]||(l[1]=e=>v(H).name=e),path:"name",label:"Name",onKeyup:b(de,["enter"])},null,8,["modelValue"])]),g("div",B,[y(E,{requiredMark:!0,modelValue:v(H).description,"onUpdate:modelValue":l[2]||(l[2]=e=>v(H).description=e),path:"description",label:"Description"},null,8,["modelValue"])])])]),g("div",G,[g("div",I,[g("div",K,["create"===e.action?(n(),c("div",O,[y(o,{checked:v(P),"onUpdate:checked":l[3]||(l[3]=e=>k(P)?P.value=e:null),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):f("",!0),"create"===e.action?(n(),c("div",{key:1,onClick:l[4]||(l[4]=e=>v(P).value!=v(P).value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},D)):f("",!0)]),g("div",T,[y(R,{class:"ml-5",shadow:"",color:"primary",loading:v(ee),onClick:de},{default:m((()=>[x(h(v(Z))+" Roles ",1)])),_:1},8,["loading"]),y(R,{class:"ml-5",shadow:"",color:"primary",onClick:re},{default:m((()=>[x(" Cancelar ")])),_:1})])])])]})),_:1},8,["state","validations","feedbacks"])])])])],64)}}});export{X as _};
