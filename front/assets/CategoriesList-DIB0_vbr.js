import{C as e}from"./categories.model-D6QCCUkg.js";import{_ as l,a as s,b as t,c as o}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-CMNdRJV8.js";import{d as a,r as i,a as r,Q as n,k as d,S as c,n as u,z as m,c as p,v,x as _,y as x,E as f,G as g,T as j,L as h,R as y,U as C,V as b,W as w}from"./index-D0wN_fuZ.js";import{_ as R}from"./CategoriesForm.vue_vue_type_script_setup_true_lang-D3fV53dV.js";import{B as E}from"./breadcrump-BYoyPtf_.js";import{_ as k}from"./RAvatar.vue_vue_type_script_setup_true_lang-BKX40U8Z.js";import{M}from"./index-BZUQu6cJ.js";import{I as A}from"./index-_uS1yxUQ.js";import{_ as S,M as L}from"./index-BQa5vSjM.js";import{_ as B,a as D}from"./dropdown-DdxiuV_U.js";import"./RestBase-6hwWqa7t.js";import"./createContext-Cl9SgfpP.js";import"./FormItemContext-CfbnWjAK.js";import"./index-CFoXpmaN.js";import"./index-brT4NzTB.js";import"./debounceValidator-Cl5zTG4a.js";import"./colors-Bmc914HC.js";import"./supportsPassive-pertglWR.js";import"./index-C2qDfXmS.js";import"./useMergedState-BcJwUeRJ.js";import"./KeyCode-BFt-2P2l.js";import"./styleChecker-CGBUfLOL.js";import"./index-BstQ-YzR.js";import"./index-DtiMcqIf.js";import"./debounce-Cg7NfA5c.js";import"./collapseMotion-BM3-mHdV.js";import"./LeftOutlined-BPCL5cU7.js";import"./isMobile-VPrdNIIw.js";import"./useMemo-CnyBa7eu.js";import"./DownOutlined-DYgTl6g-.js";import"./index-ChnaMK_j.js";import"./index-D-OtIBMI.js";import"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import"./index-BtQlog3F.js";import"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import"./RSelect.vue_vue_type_script_setup_true_lang-C-HhWqQ_.js";import"./ClearButton-D4yBJSZU.js";import"./useValidation-Dimmn3XB.js";import"./usePopupContainer-BObfUw_y.js";import"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import"./index-DEby8QZG.js";import"./useRefs-CLREAGAq.js";import"./EyeOutlined-DOQragHS.js";import"./index-DK-IiT8x.js";import"./types-DSoMB_y9.js";import"./shallowequal-UQLE3OsX.js";const V=_("div",{class:"r-close-icon hoverable-close"},null,-1),O={class:"flex"},z=_("div",{class:"r-loading-default"},null,-1),F={class:"r-breadcumbs"},K=_("div",null,[_("h1",{class:"mt-5"},"Categorias")],-1),P={class:"r-container-list"},q={class:"relative card w-full float-right"},I={class:""},T={class:"components-input-demo-presuffix mt-3 flex"},U=_("span",{class:"i-heroicons:trash-16-solid text-md mr-1 mb-1"},null,-1),G=_("span",{class:"i-heroicons:plus-16-solid text-lg mr-1 mb-1"},null,-1),H={class:"w-50% mr-20"},N={class:"float-right align-middle"},Q={class:"justify-start w-20%"},X=_("div",{class:"i-mdi:search w-1em h-1em text-2xl"},null,-1),Y={class:"flex justify-end w-20%"},Z=_("div",{class:"flex"},[_("div",{class:"i-mdi:export-variant w-1em h-1em text-xl mr-1"}),h(" Exportar ")],-1),W=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-csv-outline w-1em h-1em text-gray-900 mr-2 text-xl"}),h(" CSV ")],-1),$=_("span",{class:"flex"},[_("div",{class:"i-mdi:microsoft-excel w-1em h-1em text-green-700 mr-2 text-xl"}),h(" EXCEL ")],-1),J=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-pdf-box w-1em h-1em text-red-500 mr-2 text-xl"}),h(" PDF ")],-1),ee=["innerHTML"],le={class:"flex justify-center align-center"},se={class:"text-xl flex justify-center align-center"},te=["onClick"],oe=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer mt-1"},null,-1),ae=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer"},null,-1),ie=a({__name:"CategoriesList",setup(a){const ie=i(),re=i([]),ne=i(null),de=i(null),ce=e.visible_columns,ue=r((()=>re.value.filter((e=>n(e,ie.value,ce))))),{loading:me,result:pe,onError:ve,onResult:_e,refetch:xe}=e.useGetMany({relations:"all"}),fe=d([]),{onError:ge,onResult:je,toggleEnabled:he,loading:ye,enabled:Ce}=e.useDeleteById(fe,{defaultEnabled:!1});_e((e=>{re.value=e.data.data})),ve((e=>{c("error","Error de peticion","Error de peticion del elemento")}));const be=d([{title:"Nomencladores",disabled:!1,href:"/guarantee"},{title:"Categorias",disabled:!0}]),we=i(!1),Re=(e=!1)=>{we.value=!we.value,e&&(M.destroyAll(),xe())},Ee=()=>{de.value=null,Re()},ke=(e=!1)=>{de.value=null,Re(e)};je((()=>{var e;xe(),null==(e=null==ne?void 0:ne.value)||e.clearSelection(),c("success","Acción Exitosa","Se han eliminado los elementos correctamente"),Ce.value=!1,M.destroyAll()}));const Me=()=>{M.confirm({title:p(t,{text:"¿Desea eliminar el/los elementos seleccionados?",iconClass:"i-heroicons:trash w-1em h-1em text-4xl color-red-500",textClass:"ml-5 text-xl",loading:ye,onOk:()=>{var e;Object.assign(fe,null==(e=null==ne?void 0:ne.value)?void 0:e.selectedRowKeys),he()}}),icon:null,footer:null})},Ae=()=>{b("CategoriesList",ce,ue.value)},Se=()=>{w("CategoriesList",ce,ue.value)};return(t,a)=>{var i,r;const n=M,d=A,b=S,w=L,re=B,pe=D,ve=o;return u(),m(C,null,[p(n,{open:f(we),"onUpdate:open":a[1]||(a[1]=e=>j(we)?we.value=e:null),footer:null,"destroy-on-close":!0,onCancel:a[2]||(a[2]=e=>de.value=null),"wrap-class-name":"modal-form",width:"55%"},{closeIcon:v((()=>[V])),title:v((()=>[_("div",O,[_("div",{class:x([f(de)?"i-heroicons:pencil-square":"i-heroicons:plus-20-solid","w-1em h-1em p-3.5 mr-2"])},null,2),_("h1",null,g(f(de)?"Actualizar Categorias":"Crear Categorias"),1)])])),default:v((()=>[p(R,{modal:!0,modelValue:f(de),"onUpdate:modelValue":a[0]||(a[0]=e=>j(de)?de.value=e:null),action:f(de)?"update":"create",onCloseModal:ke,onReload:f(xe),"show-loading":!0},{loading_icon:v((()=>[z])),_:1},8,["modelValue","action","onReload"])])),_:1},8,["open"]),_("div",F,[p(E,{breadcrumb:f(be)},null,8,["breadcrumb"]),K]),_("div",P,[_("div",q,[_("div",I,[_("div",T,[p(f(y),{shadow:"",ref:"btnDelete",class:"btn-delete",disabled:0===(null==(i=f(ne))?void 0:i.selectedRowKeys.length),onClick:Me},{default:v((()=>[U,h(" Eliminar ")])),_:1},8,["disabled"]),p(f(y),{class:"mr-3",shadow:"",onClick:Ee},{default:v((()=>[G,h(" Crear Categorias ")])),_:1}),_("div",H,[_("span",N,"Elementos seleccionados "+g(null==(r=f(ne))?void 0:r.selectedRowKeys.length)+"/"+g(f(ue).length),1)]),_("div",Q,[p(d,{value:f(ie),"onUpdate:value":a[3]||(a[3]=e=>j(ie)?ie.value=e:null),class:"col-1",placeholder:"Buscar elemento","allow-clear":!0},{prefix:v((()=>[X])),_:1},8,["value"])]),_("div",Y,[p(re,{class:"flex"},{overlay:v((()=>[p(w,null,{default:v((()=>[p(b,{key:"1",onClick:Ae},{default:v((()=>[W])),_:1}),p(b,{key:"2",onClick:Se},{default:v((()=>[$])),_:1}),p(b,{key:"3"},{default:v((()=>[J])),_:1})])),_:1})])),default:v((()=>[Z])),_:1})])])]),p(s,{ref_key:"categoriesTbl",ref:ne,columns:f(ce),data:f(ue),expanded:!0,loading_icon:f(me),has_selection:!0,on_select:e=>{},onChangePagination:a[4]||(a[4]=e=>{f(xe)()}),id_element:"id",class:"mt-5"},{loading_icon:v((()=>[p(l)])),category_image:v((({_:e,record:l})=>[p(k,{img:l.category_image,size:33,circle:!0},null,8,["img"])])),expandedRowRender:v((({record:e})=>[_("div",{class:"ml-30",innerHTML:e.description},null,8,ee)])),_action:v((({_:l,record:s})=>[_("div",le,[_("div",se,[p(pe,null,{title:v((()=>[h("Actualizar elemento")])),default:v((()=>[_("div",{class:"i-heroicons:pencil-square w-1em h-1em text-blue-600 cursor-pointer",onClick:e=>(e=>{de.value=e,Re()})(s)},null,8,te)])),_:2},1024),p(ve,{title:"Desea eliminar este elemento?","ok-text":"Si","cancel-text":"No",onConfirm:l=>(l=>{me.value=!0;const{onResult:s,onError:t}=e.useDelete(l.id);s((()=>{c("success","Acción Exitosa","Se ha eliminado el elemento correctamente"),me.value=!1,xe()})),t((()=>{c("error","Acción Fallida","Ocurrió un error en la eliminación del elemento, puede estar asociado a otros elementos"),me.value=!1}))})(s)},{icon:v((()=>[oe])),default:v((()=>[p(pe,null,{title:v((()=>[h("Eliminar elemento")])),default:v((()=>[ae])),_:1})])),_:2},1032,["onConfirm"])])])])),_:1},8,["columns","data","loading_icon"])])])],64)}}});export{ie as default};
