import{S as e,_ as l}from"./SettingsForm.vue_vue_type_script_setup_true_lang-D4HPWqTp.js";import{_ as s,a as t,b as a,c as o}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-CMNdRJV8.js";import{d as i,j as n,r,a as d,Q as c,k as u,S as m,n as p,z as v,c as f,v as x,x as _,y as h,E as j,G as g,T as y,L as w,R as C,U as b,V as E,W as S,H as k}from"./index-D0wN_fuZ.js";import{M as R}from"./index-BZUQu6cJ.js";import{_ as M,B as A}from"./index-DK-IiT8x.js";import{I as D}from"./index-_uS1yxUQ.js";import{_ as V,M as L}from"./index-BQa5vSjM.js";import{_ as O,a as B}from"./dropdown-DdxiuV_U.js";import"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import"./index-BtQlog3F.js";import"./RestBase-6hwWqa7t.js";import"./createContext-Cl9SgfpP.js";import"./FormItemContext-CfbnWjAK.js";import"./index-CFoXpmaN.js";import"./debounceValidator-Cl5zTG4a.js";import"./index-brT4NzTB.js";import"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import"./useValidation-Dimmn3XB.js";import"./colors-Bmc914HC.js";import"./supportsPassive-pertglWR.js";import"./index-C2qDfXmS.js";import"./useMergedState-BcJwUeRJ.js";import"./KeyCode-BFt-2P2l.js";import"./styleChecker-CGBUfLOL.js";import"./index-BstQ-YzR.js";import"./index-DtiMcqIf.js";import"./debounce-Cg7NfA5c.js";import"./collapseMotion-BM3-mHdV.js";import"./LeftOutlined-BPCL5cU7.js";import"./isMobile-VPrdNIIw.js";import"./useMemo-CnyBa7eu.js";import"./DownOutlined-DYgTl6g-.js";import"./index-ChnaMK_j.js";import"./index-D-OtIBMI.js";import"./EyeOutlined-DOQragHS.js";import"./shallowequal-UQLE3OsX.js";const F=_("div",{class:"r-close-icon hoverable-close"},null,-1),I={class:"flex"},q=_("div",{class:"r-loading-default"},null,-1),K={class:"r-breadcumbs"},U=_("div",{class:"flex justify-center items-center"},[_("div",{class:"i-heroicons:home w-1em h-1em mr-1"}),_("p",null,"Inicio")],-1),z=_("div",null,[_("h1",{class:"mt-5"},"Settings")],-1),P={class:"r-container-list"},G={class:"relative card w-full float-right"},T={class:""},X={class:"components-input-demo-presuffix mt-3 flex"},H=_("span",{class:"i-heroicons:trash-16-solid text-md mr-1 mb-1"},null,-1),N=_("span",{class:"i-heroicons:plus-16-solid text-lg mr-1 mb-1"},null,-1),Q={class:"w-50% mr-20"},W={class:"float-right align-middle"},Y={class:"justify-start w-20%"},Z=_("div",{class:"i-mdi:search w-1em h-1em text-2xl"},null,-1),$={class:"flex justify-end w-20%"},J=_("div",{class:"flex"},[_("div",{class:"i-mdi:export-variant w-1em h-1em text-xl mr-1"}),w(" Exportar ")],-1),ee=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-csv-outline w-1em h-1em text-gray-900 mr-2 text-xl"}),w(" CSV ")],-1),le=_("span",{class:"flex"},[_("div",{class:"i-mdi:microsoft-excel w-1em h-1em text-green-700 mr-2 text-xl"}),w(" EXCEL ")],-1),se=_("span",{class:"flex"},[_("div",{class:"i-mdi:file-pdf-box w-1em h-1em text-red-500 mr-2 text-xl"}),w(" PDF ")],-1),te={class:"flex justify-center align-center"},ae={class:"text-xl flex justify-center align-center"},oe=["onClick"],ie=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer mt-1"},null,-1),ne=_("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer"},null,-1),re=i({__name:"SettingsList",setup(i){n();const re=r(),de=r([]),ce=r(null),ue=r(null),me=e.visible_columns,pe=d((()=>de.value.filter((e=>c(e,re.value,me))))),{loading:ve,result:fe,onError:xe,onResult:_e,refetch:he}=e.useGetMany({relations:"all"}),je=u([]),{onError:ge,onResult:ye,toggleEnabled:we,loading:Ce,enabled:be}=e.useDeleteById(je,{defaultEnabled:!1});_e((e=>{de.value=e.data.data})),xe((e=>{m("error","Error de peticion","Error de peticion del elemento")}));const Ee=r(!1),Se=(e=!1)=>{Ee.value=!Ee.value,e&&(R.destroyAll(),he())},ke=()=>{ue.value=null,Se()},Re=(e=!1)=>{ue.value=null,Se(e)};ye((()=>{var e;he(),null==(e=null==ce?void 0:ce.value)||e.clearSelection(),m("success","Acción Exitosa","Se han eliminado los elementos correctamente"),be.value=!1,R.destroyAll()}));const Me=()=>{R.confirm({title:f(a,{text:"¿Desea eliminar el/los elementos seleccionados?",iconClass:"i-heroicons:trash w-1em h-1em text-4xl color-red-500",textClass:"ml-5 text-xl",loading:Ce,onOk:()=>{var e;Object.assign(je,null==(e=null==ce?void 0:ce.value)?void 0:e.selectedRowKeys),we()}}),icon:null,footer:null})},Ae=()=>{E("SettingsList",me,pe.value)},De=()=>{S("SettingsList",me,pe.value)};return(a,i)=>{var n,r;const d=R,c=k("router-link"),u=M,E=A,S=D,de=V,fe=L,xe=O,_e=B,je=o;return p(),v(b,null,[f(d,{open:j(Ee),"onUpdate:open":i[1]||(i[1]=e=>y(Ee)?Ee.value=e:null),footer:null,"destroy-on-close":!0,onCancel:i[2]||(i[2]=e=>ue.value=null),"wrap-class-name":"modal-form",width:"55%"},{closeIcon:x((()=>[F])),title:x((()=>[_("div",I,[_("div",{class:h([j(ue)?"i-heroicons:pencil-square":"i-heroicons:plus-20-solid","w-1em h-1em p-3.5 mr-2"])},null,2),_("h1",null,g(j(ue)?"Actualizar Settings":"Crear Settings"),1)])])),default:x((()=>[f(l,{modal:!0,modelValue:j(ue),"onUpdate:modelValue":i[0]||(i[0]=e=>y(ue)?ue.value=e:null),action:j(ue)?"update":"create",onCloseModal:Re,onReload:j(he),"show-loading":!0},{loading_icon:x((()=>[q])),_:1},8,["modelValue","action","onReload"])])),_:1},8,["open"]),_("div",K,[f(E,{class:"h-full"},{default:x((()=>[f(u,null,{default:x((()=>[f(c,{to:{name:"index"}},{default:x((()=>[U])),_:1})])),_:1}),f(u,null,{default:x((()=>[w("Settings")])),_:1}),f(u,null,{default:x((()=>[w("Settings")])),_:1})])),_:1}),z]),_("div",P,[_("div",G,[_("div",T,[_("div",X,[f(j(C),{shadow:"",ref:"btnDelete",class:"btn-delete",disabled:0===(null==(n=j(ce))?void 0:n.selectedRowKeys.length),onClick:Me},{default:x((()=>[H,w(" Eliminar ")])),_:1},8,["disabled"]),f(j(C),{class:"mr-3",shadow:"",onClick:ke},{default:x((()=>[N,w(" Crear Settings ")])),_:1}),_("div",Q,[_("span",W,"Elementos seleccionados "+g(null==(r=j(ce))?void 0:r.selectedRowKeys.length)+"/"+g(j(pe).length),1)]),_("div",Y,[f(S,{value:j(re),"onUpdate:value":i[3]||(i[3]=e=>y(re)?re.value=e:null),class:"col-1",placeholder:"Buscar elemento","allow-clear":!0},{prefix:x((()=>[Z])),_:1},8,["value"])]),_("div",$,[f(xe,{class:"flex"},{overlay:x((()=>[f(fe,null,{default:x((()=>[f(de,{key:"1",onClick:Ae},{default:x((()=>[ee])),_:1}),f(de,{key:"2",onClick:De},{default:x((()=>[le])),_:1}),f(de,{key:"3"},{default:x((()=>[se])),_:1})])),_:1})])),default:x((()=>[J])),_:1})])])]),f(t,{ref_key:"settingsTbl",ref:ce,columns:j(me),data:j(pe),loading_icon:j(ve),has_selection:!0,on_select:e=>{},onChangePagination:i[4]||(i[4]=e=>{j(he)()}),id_element:"id",class:"mt-5"},{loading_icon:x((()=>[f(s)])),_action:x((({_:l,record:s})=>[_("div",te,[_("div",ae,[f(_e,null,{title:x((()=>[w("Actualizar elemento")])),default:x((()=>[_("div",{class:"i-heroicons:pencil-square w-1em h-1em text-blue-600 cursor-pointer",onClick:e=>(e=>{ue.value=e,Se()})(s)},null,8,oe)])),_:2},1024),f(je,{title:"Desea eliminar este elemento?","ok-text":"Si","cancel-text":"No",onConfirm:l=>(l=>{ve.value=!0;const{onResult:s,onError:t}=e.useDelete(l.id);s((()=>{m("success","Acción Exitosa","Se ha eliminado el elmento correctamente"),ve.value=!1,he()})),t((()=>{m("error","Acción Fallida","Ocurrio un error en la eliminación del elemento, puede estar asociado a otros elementos"),ve.value=!1}))})(s)},{icon:x((()=>[ie])),default:x((()=>[f(_e,null,{title:x((()=>[w("Eliminar elemento")])),default:x((()=>[ne])),_:1})])),_:2},1032,["onConfirm"])])])])),_:1},8,["columns","data","loading_icon"])])])],64)}}});export{re as default};
