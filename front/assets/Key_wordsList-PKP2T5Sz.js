var e=Object.defineProperty,a=(a,l,s)=>((a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s)(a,"symbol"!=typeof l?l+"":l,s);import{R as l,C as s}from"./RestBase-6hwWqa7t.js";import{r as t,m as i,i as o,R as n}from"./index-CFoXpmaN.js";import{d as r}from"./index-brT4NzTB.js";import{_ as d,a as c,b as u,c as m}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-CMNdRJV8.js";import{d as p,X as v,h as f,j as _,Y as h,k as x,r as g,a as y,S as b,n as w,z as k,q as j,v as C,O as E,E as M,Z as R,A as q,x as V,c as A,M as S,L as U,G as K,U as L,Q as D,y as O,R as I,V as P,W as T,H as F}from"./index-D0wN_fuZ.js";import{_ as N}from"./RForm.vue_vue_type_script_setup_true_lang-HqTuq9xx.js";import{_ as B}from"./RButton.vue_vue_type_style_index_0_lang-DWca47Ax.js";import{_ as z}from"./REditor.vue_vue_type_style_index_0_lang-B9q55COs.js";import{M as G}from"./index-BZUQu6cJ.js";import{_ as X,B as Y}from"./index-DK-IiT8x.js";import{I as Z}from"./index-_uS1yxUQ.js";import{_ as $,M as H}from"./index-BQa5vSjM.js";import{_ as Q,a as W}from"./dropdown-DdxiuV_U.js";import"./createContext-Cl9SgfpP.js";import"./FormItemContext-CfbnWjAK.js";import"./colors-Bmc914HC.js";import"./supportsPassive-pertglWR.js";import"./index-C2qDfXmS.js";import"./useMergedState-BcJwUeRJ.js";import"./KeyCode-BFt-2P2l.js";import"./styleChecker-CGBUfLOL.js";import"./index-BstQ-YzR.js";import"./index-DtiMcqIf.js";import"./debounce-Cg7NfA5c.js";import"./collapseMotion-BM3-mHdV.js";import"./LeftOutlined-BPCL5cU7.js";import"./isMobile-VPrdNIIw.js";import"./useMemo-CnyBa7eu.js";import"./DownOutlined-DYgTl6g-.js";import"./index-ChnaMK_j.js";import"./index-D-OtIBMI.js";import"./index-BtQlog3F.js";import"./useValidation-Dimmn3XB.js";import"./EyeOutlined-DOQragHS.js";import"./shallowequal-UQLE3OsX.js";const J={create:{name:{required:t},description:{required:t,maxLength:i(65535)}},update:{role_father_id:{integer:o},name:{required:t},description:{required:t,maxLength:i(65535)}}},ee=await l("key_words","manage/key_words"),ae=class extends ee{constructor(e=null){super(),a(this,"id"),a(this,"name"),a(this,"description"),a(this,"created_at"),a(this,"updated_at"),null!=e&&(this.id=e.id||void 0,this.name=e.name||null,this.description=e.description||null,this.created_at=e.created_at?r(e.created_at):null,this.updated_at=e.updated_at?r(e.updated_at):null)}set_attributes(e=null){null!=e&&(this.id=e.id,this.name=e.name,this.description=e.description,this.created_at=r(e.created_at),this.updated_at=r(e.updated_at))}get_id(){return this.id}class_name(){return"Key_words"}};a(ae,"validations",J),a(ae,"feedbacks",{create:{name:{isUnique:"This name has been taken"},id:{isUnique:"This id has been taken"}},update:{name:{isUnique:"This name has been taken"},id:{isUnique:"This id has been taken"}}}),a(ae,"columns",[{title:"Name",dataIndex:"name",align:"center",key:"name",sorter:(e,a)=>+(e.name>a.name)-+(e.name<a.name)},{title:"Description",dataIndex:"description",align:"center",key:"description",sorter:(e,a)=>+(e.description>a.description)-+(e.description<a.description)},{title:"Acciones",key:"_action",fixed:"right",scopedSlots:{customRender:"_action"}}]),a(ae,"visible_columns",ae.show_columns(["*"],!0));let le=ae;const se={class:"r-container-form"},te={class:"mt-10 sm:mt-0"},ie={class:"shadow overflow-hidden sm:rounded-md"},oe={class:"px-4 py-5 bg-white dark:bg-slate-800 sm:p-6"},ne={class:"grid grid-cols-4 gap-4"},re={class:"grid-input"},de={class:"col-span-4"},ce={class:"px-4 py-3 bg-gray-50 dark:bg-slate-700 dark:bg-opacity-70 text-right sm:px-6"},ue={class:"r-footer-form"},me={class:"flex"},pe={key:0,class:"flex-none items-center"},ve=[V("label",{for:"andNew",class:"font-bold text-gray-700 dark:text-slate-200 !cursor-pointer"},[U("Insertar y nuevo "),V("span",{id:"andNew-description",class:"ml-1 text-muted"},"Se insertara un elemento y reiniciara el formuario")],-1)],fe={class:"r-footer-button-form"},_e=p({__name:"Key_wordsForm",props:v({modal:f.bool.def(!1),action:f.string.def("create"),loading_text:f.string.def(""),showLoading:f.bool.def(!0)},{modelValue:{},modelModifiers:{}}),emits:v(["closeModal","reload"],["update:modelValue"]),setup(e,{emit:a}){const l=_(),t=e,i=a,o="create"==t.action?"Crear":"Actualizar",r=h(e,"modelValue"),d=x(new le(r.value)),c=g(),u=g(!1),{loading:m,result:p}=le.useGetMany(),{loading:v,toggleEnabled:f,onResult:D,enabled:O,onError:I}=le.useStaticSave(d,{defaultEnabled:!1}),P=y((()=>m.value)),T=()=>{t.modal?i("closeModal"):l.push({name:"key_words_list"})};async function F(){var e;await(null==(e=c.value)?void 0:e.validate())&&f()}return I((e=>{b("error","Error en accion","Error en accion del elemento")})),D((e=>{var a;b("success","Accion  "+o,"Accion ejecutada correctamente"),u.value?(null==(a=c.value)||a.clear(),O.value=!1,Object.assign(d,new le(r.value)),t.modal&&i("reload")):t.modal?i("closeModal",!0):l.push({name:"key_words_list"})})),(a,l)=>{const i=s;return w(),k(L,null,[e.showLoading?(w(),j(R,{key:0,"h-full":!0,class:"",loading:M(P),description:t.loading_text},{default:C((()=>[E(a.$slots,"loading_icon")])),_:3},8,["loading","description"])):q("",!0),V("div",se,[V("div",te,[V("div",ie,[A(N,{ref_key:"key_wordsForm",ref:c,state:M(d),validations:M(le).validations[e.action],feedbacks:M(le).feedbacks[e.action],loading:!0},{default:C((()=>[V("div",oe,[V("div",ne,[V("div",re,[A(M(n),{type:"text",requiredMark:!0,modelValue:M(d).name,"onUpdate:modelValue":l[0]||(l[0]=e=>M(d).name=e),path:"name",label:"Name",onKeyup:S(F,["enter"])},null,8,["modelValue"])]),V("div",de,[A(z,{requiredMark:!0,modelValue:M(d).description,"onUpdate:modelValue":l[1]||(l[1]=e=>M(d).description=e),path:"description",label:"Description"},null,8,["modelValue"])])])]),V("div",ce,[V("div",ue,[V("div",me,["create"===e.action?(w(),k("div",pe,[A(i,{checked:u.value,"onUpdate:checked":l[2]||(l[2]=e=>u.value=e),"aria-describedby":"offers-description",id:"andNew"},null,8,["checked"])])):q("",!0),"create"===e.action?(w(),k("div",{key:1,onClick:l[3]||(l[3]=e=>u.value.value!=u.value.value),class:"flex text-sm absolute mx-[2rem] my-[4px]"},ve)):q("",!0)]),V("div",fe,[A(B,{class:"ml-5",shadow:"",color:"primary",loading:M(v),onClick:F},{default:C((()=>[U(K(M(o))+" Palabras claves ",1)])),_:1},8,["loading"]),A(B,{class:"ml-5",shadow:"",color:"primary",onClick:T},{default:C((()=>[U(" Cancelar ")])),_:1})])])])])),_:1},8,["state","validations","feedbacks"])])])])],64)}}}),he=V("div",{class:"r-close-icon hoverable-close"},null,-1),xe={class:"flex"},ge=V("div",{class:"r-loading-default"},null,-1),ye={class:"r-breadcumbs"},be=V("div",{class:"flex justify-center items-center"},[V("div",{class:"i-heroicons:home w-1em h-1em mr-1"}),V("p",null,"Inicio")],-1),we=V("div",null,[V("h1",{class:"mt-5"},"Palabras claves")],-1),ke={class:"r-container-list"},je={class:"relative card w-full float-right"},Ce={class:""},Ee={class:"components-input-demo-presuffix mt-3 flex"},Me=V("span",{class:"i-heroicons:trash-16-solid text-md mr-1 mb-1"},null,-1),Re=V("span",{class:"i-heroicons:plus-16-solid text-lg mr-1 mb-1"},null,-1),qe={class:"w-50% mr-20"},Ve={class:"float-right align-middle"},Ae={class:"justify-start w-20%"},Se=V("div",{class:"i-mdi:search w-1em h-1em text-2xl"},null,-1),Ue={class:"flex justify-end w-20%"},Ke=V("div",{class:"flex"},[V("div",{class:"i-mdi:export-variant w-1em h-1em text-xl mr-1"}),U(" Exportar ")],-1),Le=V("span",{class:"flex"},[V("div",{class:"i-mdi:file-csv-outline w-1em h-1em text-gray-900 mr-2 text-xl"}),U(" CSV ")],-1),De=V("span",{class:"flex"},[V("div",{class:"i-mdi:microsoft-excel w-1em h-1em text-green-700 mr-2 text-xl"}),U(" EXCEL ")],-1),Oe=V("span",{class:"flex"},[V("div",{class:"i-mdi:file-pdf-box w-1em h-1em text-red-500 mr-2 text-xl"}),U(" PDF ")],-1),Ie={class:"flex justify-center align-center"},Pe={class:"text-xl flex justify-center align-center"},Te=["onClick"],Fe=V("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer mt-1"},null,-1),Ne=V("div",{class:"i-heroicons:trash w-1em h-1em text-red-600 cursor-pointer"},null,-1),Be=p({__name:"Key_wordsList",setup(e){const a=g(),l=g([]),s=g(null),t=g(null),i=le.visible_columns,o=y((()=>l.value.filter((e=>D(e,a.value,i))))),{loading:n,result:r,onError:p,onResult:v,refetch:f}=le.useGetMany(),_=x([]),{onError:h,onResult:j,toggleEnabled:E,loading:R,enabled:q}=le.useDeleteById(_,{defaultEnabled:!1});v((e=>{l.value=e.data.data})),p((e=>{b("error","Error de peticion","Error de peticion del elemento")}));const S=g(!1),N=(e=!1)=>{S.value=!S.value,e&&(G.destroyAll(),f())},B=()=>{t.value=null,N()},z=(e=!1)=>{t.value=null,N(e)};j((()=>{var e;f(),null==(e=null==s?void 0:s.value)||e.clearSelection(),b("success","Acción Exitosa","Se han eliminado los elementos correctamente"),q.value=!1,G.destroyAll()}));const J=()=>{G.confirm({title:A(u,{text:"¿Desea eliminar el/los elementos seleccionados?",iconClass:"i-heroicons:trash w-1em h-1em text-4xl color-red-500",textClass:"ml-5 text-xl",loading:R,onOk:()=>{var e;Object.assign(_,null==(e=null==s?void 0:s.value)?void 0:e.selectedRowKeys),E()}}),icon:null,footer:null})},ee=()=>{P("Key_wordsList",i,o.value)},ae=()=>{T("Key_wordsList",i,o.value)};return(e,l)=>{var r,u;const p=G,v=F("router-link"),_=X,h=Y,x=Z,g=$,y=H,j=Q,E=W,R=m;return w(),k(L,null,[A(p,{open:S.value,"onUpdate:open":l[1]||(l[1]=e=>S.value=e),footer:null,"destroy-on-close":!0,onCancel:l[2]||(l[2]=e=>t.value=null),"wrap-class-name":"modal-form",width:"55%"},{closeIcon:C((()=>[he])),title:C((()=>[V("div",xe,[V("div",{class:O([t.value?"i-heroicons:pencil-square":"i-heroicons:plus-20-solid","w-1em h-1em p-3.5 mr-2"])},null,2),V("h1",null,K(t.value?"Actualizar Tipos":"Crear Tipos"),1)])])),default:C((()=>[A(_e,{modal:!0,modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),action:t.value?"update":"create",onCloseModal:z,onReload:M(f),"show-loading":!0},{loading_icon:C((()=>[ge])),_:1},8,["modelValue","action","onReload"])])),_:1},8,["open"]),V("div",ye,[A(h,{class:"h-full"},{default:C((()=>[A(_,null,{default:C((()=>[A(v,{to:{name:"index"}},{default:C((()=>[be])),_:1})])),_:1}),A(_,null,{default:C((()=>[U("Administración")])),_:1}),A(_,null,{default:C((()=>[U("Palabras claves")])),_:1})])),_:1}),we]),V("div",ke,[V("div",je,[V("div",Ce,[V("div",Ee,[A(M(I),{shadow:"",ref:"btnDelete",class:"btn-delete",disabled:0===(null==(r=s.value)?void 0:r.selectedRowKeys.length),onClick:J},{default:C((()=>[Me,U(" Eliminar ")])),_:1},8,["disabled"]),A(M(I),{class:"mr-3",shadow:"",onClick:B},{default:C((()=>[Re,U(" Crear Palabras claves ")])),_:1}),V("div",qe,[V("span",Ve,"Elementos seleccionados "+K(null==(u=s.value)?void 0:u.selectedRowKeys.length)+"/"+K(M(o).length),1)]),V("div",Ae,[A(x,{value:a.value,"onUpdate:value":l[3]||(l[3]=e=>a.value=e),class:"col-1",placeholder:"Buscar elemento","allow-clear":!0},{prefix:C((()=>[Se])),_:1},8,["value"])]),V("div",Ue,[A(j,{class:"flex"},{overlay:C((()=>[A(y,null,{default:C((()=>[A(g,{key:"1",onClick:ee},{default:C((()=>[Le])),_:1}),A(g,{key:"2",onClick:ae},{default:C((()=>[De])),_:1}),A(g,{key:"3"},{default:C((()=>[Oe])),_:1})])),_:1})])),default:C((()=>[Ke])),_:1})])])]),A(c,{ref_key:"key_wordsTbl",ref:s,columns:M(i),data:M(o),loading_icon:M(n),has_selection:!0,on_select:e=>{},onChangePagination:l[4]||(l[4]=e=>{M(f)()}),id_element:"id",class:"mt-5"},{loading_icon:C((()=>[A(d)])),_action:C((({_:e,record:a})=>[V("div",Ie,[V("div",Pe,[A(E,null,{title:C((()=>[U("Actualizar elemento")])),default:C((()=>[V("div",{class:"i-heroicons:pencil-square w-1em h-1em text-blue-600 cursor-pointer",onClick:e=>(e=>{t.value=e,N()})(a)},null,8,Te)])),_:2},1024),A(R,{title:"Desea eliminar este elemento?","ok-text":"Si","cancel-text":"No",onConfirm:e=>(e=>{n.value=!0;const{onResult:a,onError:l}=le.useDelete(e.id);a((()=>{b("success","Acción Exitosa","Se ha eliminado el elmento correctamente"),n.value=!1,f()})),l((()=>{b("error","Acción Fallida","Ocurrio un error en la eliminación del elemento, puede estar asociado a otros elementos"),n.value=!1}))})(a)},{icon:C((()=>[Fe])),default:C((()=>[A(E,null,{title:C((()=>[U("Eliminar elemento")])),default:C((()=>[Ne])),_:1})])),_:2},1032,["onConfirm"])])])])),_:1},8,["columns","data","loading_icon"])])])],64)}}});export{Be as default};
